@using Polaris.Domain.Entities.Organisations
@using Polaris.Domain.Entities.Users

<h3>My Organisations</h3>

<OrganisationsTable Collection="@UserOrganisations" Type="@typeof(Organisation)"/>

@code {
    [Parameter]
    public IOrganisationContext OrganisationContext { get; set; }
    
    [Parameter]
    public User CurrentUser { get; set; }
    
    private IEnumerable<Organisation> UserOrganisations { get; set; }

    protected override void OnInitialized()
    {
        if (CurrentUser != null && OrganisationContext != null)
        {
            UserOrganisations = OrganisationContext.UserOrganisations(CurrentUser);
        }
    }
}